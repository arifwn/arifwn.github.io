
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Cryptography Primer - Sainsmograf</title>
  <meta name="author" content="Arif Widi Nugroho">

  
  <meta name="description" content="The uproar caused by recent leak from Edward Snowden still hasn&rsquo;t receded yet. There are various stances about privacy and government snooping &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://arifwn.github.io/blog/2013/07/15/encryption-primer">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Sainsmograf" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Sainsmograf</a></h1>
  
    <h2>Science, Software and Stuff...</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:arifwn.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/hire-me/">Hire Me!</a></li>
  <li><a href="https://github.com/arifwn">Github Profile</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Cryptography Primer</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-15T20:37:00+07:00" pubdate data-updated="true">Jul 15<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>The uproar caused by recent leak from <a href="https://en.wikipedia.org/wiki/Edward_Snowden">Edward Snowden</a> still hasn&rsquo;t receded yet. There are various stances about privacy and government snooping floating around in the internet. Some say they have <a href="https://twitter.com/_nothingtohide">nothing to hide</a>. Others argue if the government can snoop you, and black-hat hackers can snoop the government, then we&rsquo;re royally screwed because anybody with money can pay the black-hats (or, gasp!, pay some corrupt government officials) to get data about anybody.</p>

<p>Politics aside, security must be taken seriously everytime we use internet. In this post I would like to talk about the basic of security in general computing today.</p>

<h2>Basic Cryptography</h2>

<p>In general, cryptography is used to transform a string of text into a convoluted mumbo-jumbo that do not have any resemblance to the original text whatsoever to a person without access to its encryption key. That original string of text is called plaintext, and the resulting mumbo-jumbo is called <a href="https://en.wikipedia.org/wiki/Ciphertext">cyphertext</a>.</p>

<p>Based on the keys used for the encryption, there are two type of encryption: symmetric-key and asymmetric-key encryption.</p>

<h3>Symmetric-Key Encryption</h3>

<p>In symmetric-key encryption, the key that uses to encrypt the plaintext into cyphertext can be used to reverse the operation. Decrypting the resulting cyphertext using the same key will yield the same plain text. So, if two people can share an encryption key, they can communicate securely using that key. A simple example is sharing an encrypted rar file with your partner, your partner must know your encryption key (the password) in order to decrypt the rar file. So, you can go meet your partner and tell him your password.</p>

<p>What if it&rsquo;s impossible for you to meet your partner physically?  Supposedly, the secrecy of the data you want to transmit is very important and the balance of the world would be disrupted if it compromised. How can you tell him your password with a strong guarantee that nobody snoop it in between the transit? Using email? Email is generally transmitted in plain text, anybody in the network between you and your partner can read it. Using google chat? Then google can read it whenever it please. Using text message? Then the cellphone operator can read it. Also, <a href="http://arstechnica.com/gadgets/2010/12/15-phone-3-minutes-all-thats-needed-to-eavesdrop-on-gsm-call/">gsm security is considered broken</a> and anyone with the right equipment can intercept your message. It&rsquo;s time to use an asymmetric-key encryption.</p>

<h3>Asymmetric-Key Encryption</h3>

<p>In asymmetric-key encryption, you have two keys instead of one: the private keys (which you should guard with your life) and the public key (which you should share to anyone and their pets). So, why does it require two keys?</p>

<p>Anybody who know your public key can encrypt a plaintext that only you can decrypt (using your private key). Consider our example above (in which you need to transmit a super secret data to your partner). You can encrypt the password with your partner&rsquo;s public key, and send him the resulting cyphertext. Using his private key, he&rsquo;ll decrypt the cyphertext and get the password. Then you can send him your password protected rar archive to him.</p>

<p>Wait, why use rar? Why not simply encrypt the data using the public key instead?</p>

<p>Well, actually you can use anything that properly encrypt the data. <a href="http://www.7-zip.org/">7-zip</a> support AES encryption (one of the commonly used symmetric-key encryption) too, just like rar. The reason why we didn&rsquo;t encrypt the whole data (presumably we have 1.3GB of it for the example) using the asymmetric-key encryption is it&rsquo;s really slow compared to the symmetric-key encryption. It is much more efficient (and faster) to encrypt the data using symmetric-key encryption and send the key/password through asymmetric-key encryption instead of encrypting the data wholesale using asymmetric-key encryption. Over time, the latest advances in cryptography will make the asymmetric-key encryption as fast as the symmetric-key encryption.</p>

<h2>Can We Break The Encryption?</h2>

<h3>Random Number Generator</h3>

<p>Cryptography relies heavily on random number. For example, you don&rsquo;t want your keys to be easily guessable by anyone, you want it sufficiently random that the odds of successfully guessing your key is so low nobody even try to guess it (that&rsquo;s why you should favor randomly generated key over simple memorable string).</p>

<p>But how do we obtain a truly random number from inside a computer? A computer by itself cannot generate a truly random number. A computer is a state machine, so in theory, if you know the machine state at the time the secret random number generated, you might be able to guess that number. So we need another source of randomness to feed the random number generator so it can spit out numbers with more randomness. That source of randomness could be a network interface, human input, or even <a href="http://phys.org/news1147.html">cosmic rays</a>.</p>

<p>Starting from the Ivy Bridge processors, Intel includes an on-chip random number generator along with a new instruction to make uses of it, <a href="http://en.wikipedia.org/wiki/RDRAND">RDRAND</a>. It can generate a random bit for each clock cycle. Modern operating systems use the instruction as additional source of randomness for their built-in random number generator.</p>

<p>There are <a href="https://news.ycombinator.com/item?id=6038473">concerns regarding the use of RDRAND in linux kernel</a>. Since RDRAND uses an on-chip random number generator, somebody at processor manufacturing plant could replace the chip with the one with faulty random number generator, which would potentially compromise security on linux system.</p>

<p>Should we worry that an exploit to random number generator could compromise our security? Probably not, but keep it in mind though.</p>

<h3>Quantum Computing</h3>

<p><a href="http://www.mat.ucm.es/catedramdeguzman/old/01historias/haciaelfuturo/Burgos090900/quantumcomputingSciAmer/0698gershenfeld.html">Quantum computing</a> has gain a lot of buzz recently, especially those <a href="http://en.wikipedia.org/wiki/D-Wave_Systems">D-Wave</a> stuff. But what is quantum computing and what is the implication for our daily (internet) life?</p>

<h4>Quantum Superposition</h4>

<p>Remember Schr√∂dinger cat? It&rsquo;s often used to illustrate quantum superposition. The cat is in the box, with poison and radioactive trigger that have 50/50 chance of releasing the poison to the poor cat. In the end, is the cat alive or dead? Not that simple. The poor cat is in a superposition of state and both alive and dead. The moment we take a peek to see how the poor cat&rsquo;s doing, the quantum superposition collapsed and the cat falls into one of the two possible state: alive or dead.</p>

<p>That cat analogy doesn&rsquo;t make any sense, right? How could the cat both alive and dead at the same time before we take a look at it? But it highlights an important feature of quantum superposition: the quantum superposition state collapse into in one of the possible states the moment we measure it.</p>

<h4>Qubit</h4>

<p>Ok, the quantum superposition is neat because it can represent multiple states simultaneously. But what&rsquo;s that got to do with quantum computing?</p>

<p>The building block of traditional computing, as we all know very well, is <em>bit</em>. A bit can represent two states: either 1 or 0. In quantum computing, the building block is <em>qubit</em> (quantum bit). Because qubit has quantum superposition property, it can be in multiple states at the same time; it can contain both 1 and 0 until the moment you try to measure it, at which point it would collapse into either 1 or 0. This is indeed truly mind blowing.</p>

<p>Each qubit can have both 0 and 1 simultaneously, and each state has its own probability coefficient. To describe a qubit, we would need two numbers to store probability coefficients for 0 and 1. To describe two qubits, we would need 4 numbers, and so on in n<sup>2</sup> relation. This illustrates the strength of quantum computer: we would need a traditional computer capable to store 2<sup>100</sup> numbers to represent a 100 qubits quantum computer. That means we need millions of <a href="http://en.wikipedia.org/wiki/Yotta-">yottabyte</a> just to represent a mere 100 qubits quantum computer!</p>

<h4>Quantum Teleportation</h4>

<p>Another bizzare phenomenon is quantum teleportation. After a pair of particles interact with each other and separated, if one particle has its state changed, the other would have its state changed too, no matter what distance they are separated. It is as if the particles can sense what happen to its pal and react accordingly, just like in horror movies.</p>

<p>Again, what&rsquo;s that got to do with quantum computing?</p>

<p>In 1994, a researcher from AT&amp;T, Peter W. Shor found a way to use quantum teleportation to find prime factors of an integer. It turns out to be much faster than any traditional computer can compute. It is now known as <a href="http://en.wikipedia.org/wiki/Shor's_algorithm">Shor&rsquo;s Algorithm</a>.</p>

<p>In asymmetric-key encryption, the public and private keys must be somehow related for the encryption algorithm to work. Therefore, the private keys can be recovered with some forms of factorization from the public key, except doing so is computationally hard, and even virtually impossible (takes too much time, like <em>billions</em> of years) if the key is sufficiently long.</p>

<p>With a sufficiently big quantum computer, factoring private key from public key is feasible using Shor&rsquo;s algorithm. The task that could takes billions of years now can be accomplished in a couple years, for instance. That&rsquo;s why <a href="http://pqcrypto.org/">cryptography researchers now scramble to produce new cryptography algorithms and methods</a> in the event that quantum computer is finally big enough to pose a threat for cryptography world.</p>

<h2>Securing Email</h2>

<p>There is no doubt that email plays an important role in our internet life. We can&rsquo;t even register for a new account on many website without email! But how does email really work actually?</p>

<h3>Simple Mail Transfer Protocol</h3>

<p>The SMTP (Simple Mail Transfer Protocol) is used by email servers to exchange emails to each other. In fact, OSX and most linux distributions ship with <code>sendmail</code>, an email transport agent. If you&rsquo;re on a Mac or Linux, open a terminal and type the following code to send yourself an email (replace my email address with yours):</p>

<figure class='code'><figcaption><span>Sending an Email From Command Line Interface Using Unix Sendmail</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sendmail arif@sainsmograf.com <span class="s">&lt;&lt; EOF</span>
</span><span class='line'><span class="s">Hello, just a test email from command line!</span>
</span><span class='line'><span class="s">EOF</span>
</span></code></pre></td></tr></table></div></figure>


<p>Soon, you&rsquo;ll receive an email from <code>&lt;username&gt;@&lt;hostname&gt;</code> (example: <a href="&#x6d;&#x61;&#105;&#x6c;&#x74;&#111;&#58;&#97;&#114;&#105;&#x66;&#x40;&#97;&#114;&#x69;&#x66;&#x73;&#45;&#109;&#97;&#x63;&#x62;&#x6f;&#x6f;&#107;&#x2d;&#112;&#x72;&#x6f;&#46;&#x6c;&#111;&#x63;&#x61;&#x6c;">&#x61;&#x72;&#105;&#x66;&#x40;&#97;&#114;&#105;&#x66;&#115;&#x2d;&#109;&#97;&#99;&#98;&#111;&#x6f;&#x6b;&#x2d;&#x70;&#114;&#x6f;&#x2e;&#x6c;&#111;&#x63;&#97;&#108;</a>). If the command run successfully but you never receive any email, chance that:</p>

<ul>
<li>Your ISP block communication to port 25 to stop <a href="https://en.wikipedia.org/wiki/Spambot">spambots</a></li>
<li>Your email provider (gmail, yahoo, etc) ban your ip range (possibly due to spambots, damn spambots!)</li>
</ul>


<p>If you did receive the email, you might not be able to reply to it unless you have configured your hostname properly.</p>

<p>In the above example, my computer act as an email server and communicate directly to sainsmograf.com&rsquo;s mail server. Note the <em>email server</em> part. If you&rsquo;re using Outlook or Thunderbird to connect to smtp server, your computer act as a <em>user</em> of that server. Here, <code>sendmail</code> act as an email server delivering email from its user (me) to another email server (sainsmograf.com).</p>

<h3>Can Somebody Snoop My Email?</h3>

<p>By default, <code>sendmail</code> uses unencrypted protocol. The email sent using the <code>sendmail</code> command in the previous section is not encrypted, and anybody between you and your destination server can easily read your email. The good news is, sendmail does support SSL and can encrypt your email messages during transmission. However, sendmail&rsquo;s SSL encryption won&rsquo;t protect your email if the recipient access his mailbox via unencrypted connection (for example, plain old POP3 without SSL).</p>

<p>You may need to encrypt your email message yourself to guarantee that nobody snoop your email, but how?</p>

<h3>Pretty Good Privacy (PGP)</h3>

<p>A popular way to encrypt your email messages is using PGP. A widely used implementation of PGP is GNU Privacy Guard (GnuPG, or GPG). <a href="http://www.wired.com/threatlevel/2013/06/signed-bda0df3c/">If somebody asks you to use PGP/GPG</a>, don&rsquo;t be confused. What he means is you should use GnuPG to exchange PGP-encrypted message with him.</p>

<p>After getting GPG installed (<a href="https://gpgtools.org/">OSX</a>, <a href="https://help.ubuntu.com/community/GnuPrivacyGuardHowto">Linux</a>, <a href="http://gpg4win.org/">Windows</a>), lets use it to encrypt our email!</p>

<h4>Generate Private/Public Keys Pair</h4>

<p>PGP uses asymmetric encryption (discussed above), so the first logical step to encrypt your email is generating your public and private keys. Run the following command from your terminal to generate your keys pair:</p>

<figure class='code'><figcaption><span>Generate Private/Public Keys Pair</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gpg --gen-key
</span></code></pre></td></tr></table></div></figure>


<p>You&rsquo;ll see the following output:</p>

<figure class='code'><figcaption><span>GPG Output</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>gpg (GnuPG) 1.4.13; Copyright (C) 2012 Free Software Foundation, Inc.
</span><span class='line'>This is free software: you are free to change and redistribute it.
</span><span class='line'>There is NO WARRANTY, to the extent permitted by law.
</span><span class='line'>
</span><span class='line'>Please select what kind of key you want:
</span><span class='line'>   (1) RSA and RSA (default)
</span><span class='line'>   (2) DSA and Elgamal
</span><span class='line'>   (3) DSA (sign only)
</span><span class='line'>   (4) RSA (sign only)
</span><span class='line'>Your selection?
</span></code></pre></td></tr></table></div></figure>


<p>Select the default by entering <code>1</code>. You&rsquo;ll be prompted another questions. Just answer them accordingly. Eventually, GPG will ask you to create a passphrase:</p>

<figure class='code'><figcaption><span>GPG Output</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>gpg (GnuPG) 1.4.13; Copyright (C) 2012 Free Software Foundation, Inc.
</span><span class='line'>This is free software: you are free to change and redistribute it.
</span><span class='line'>There is NO WARRANTY, to the extent permitted by law.
</span><span class='line'>
</span><span class='line'>Please select what kind of key you want:
</span><span class='line'>   (1) RSA and RSA (default)
</span><span class='line'>   (2) DSA and Elgamal
</span><span class='line'>   (3) DSA (sign only)
</span><span class='line'>   (4) RSA (sign only)
</span><span class='line'>Your selection? 1
</span><span class='line'>RSA keys may be between 1024 and 4096 bits long.
</span><span class='line'>What keysize do you want? (2048) 4096
</span><span class='line'>Requested keysize is 4096 bits
</span><span class='line'>Please specify how long the key should be valid.
</span><span class='line'>         0 = key does not expire
</span><span class='line'>      &lt;n&gt;  = key expires in n days
</span><span class='line'>      &lt;n&gt;w = key expires in n weeks
</span><span class='line'>      &lt;n&gt;m = key expires in n months
</span><span class='line'>      &lt;n&gt;y = key expires in n years
</span><span class='line'>Key is valid for? (0)
</span><span class='line'>Key does not expire at all
</span><span class='line'>Is this correct? (y/N) y
</span><span class='line'>
</span><span class='line'>You need a user ID to identify your key; the software constructs the user ID
</span><span class='line'>from the Real Name, Comment and Email Address in this form:
</span><span class='line'>    &quot;Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;&quot;
</span><span class='line'>
</span><span class='line'>Real name: Arif Widi Nugroho
</span><span class='line'>Email address: arif@sainsmograf.com
</span><span class='line'>Comment:
</span><span class='line'>You selected this USER-ID:
</span><span class='line'>    &quot;Arif Widi Nugroho &lt;arif@sainsmograf.com&gt;&quot;
</span><span class='line'>
</span><span class='line'>Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o
</span><span class='line'>You need a Passphrase to protect your secret key.
</span></code></pre></td></tr></table></div></figure>


<p>Now, enter a long passphrass, but don&rsquo;t forget it! If you forgot your passphrase, there is no way to recover it and you can never decrypt all messages that has been encrypted with your pulic key. Consider using a good password manager to store your complicated passphrase.</p>

<p>Now that you have your own private and public keys, you should share your public key to everyone! To print your public key, use this command (replace my email address with yours):</p>

<figure class='code'><figcaption><span>Print PGP Public Key</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gpg -a --export arif@sainsmograf.com
</span></code></pre></td></tr></table></div></figure>


<p>And the result:</p>

<figure class='code'><figcaption><span>My Public Key</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>-----BEGIN PGP PUBLIC KEY BLOCK-----
</span><span class='line'>Version: GnuPG v1.4.13 (Darwin)
</span><span class='line'>
</span><span class='line'>mQINBFHw6YUBEAC0hmxW63ESb+YwatEVTeSOTkHjYp7G2S2gjmItVOuZ+N8us59N
</span><span class='line'>uMH1M1g71GNcztYIXzQIoKITiLxLfP0+mPf0j2vzuoYY9AAsQgsr0fYPTDvJUz2c
</span><span class='line'>xseZ0BROm2wfGF3U54bGroQOCqXMQXV/5ln45ie/NqzZRWmF4xpKJ4dPN1GXFphz
</span><span class='line'>SKw5uQkFC5JcmoPCzU7xsEdLspSNhL98a1rvLD0QVXMxVGM/NSkhJYaYidChdsiM
</span><span class='line'>UMQ9AWge6PSDE/A9ZnZC+BvInYzJ3MoYHOcZxGk1fttUY1JKQvLCodSuCt9MKD+7
</span><span class='line'>gnXOea4a2VaEQE3rfsa9CuGVz/r1o54hOnYMzNex3z3VaZX1hAV6pmwfl/CKVggY
</span><span class='line'>R401xJDYAUjmWGSeheqfon9rdw9hDitleaekq0j0wfpJ+EoMEohVsDKrf8TvcRrO
</span><span class='line'>IYt1CAjjI/cqbuIm3bfr8T6wT59H879ss3v0ibNmD4mf9/+IR23Xj/g1nA6aMjX3
</span><span class='line'>62psBNOvFB6pP59GMtDD93Zze6FMBzPRGqsB0YR6Gp3gkdpFBFHgj3vwaYC+bWJ8
</span><span class='line'>LmYJrPTivVEAWZ4I2tRyrkdJzIiRlNnAXCmJTcaMhkASfnjgNJWloGDk/o1SqOhe
</span><span class='line'>F9w2M9iGY/xdz5j1gRkdDSvPr7AGC5r4Vb26ZNdszZ7ZRF5gekF5k21dZQARAQAB
</span><span class='line'>tChBcmlmIFdpZGkgTnVncm9obyA8YXJpZkBzYWluc21vZ3JhZi5jb20+iQI4BBMB
</span><span class='line'>AgAiBQJR8OmFAhsDBgsJCAcDAgYVCAIJCgsEFgIDAQIeAQIXgAAKCRBmmK8D5X4F
</span><span class='line'>BzsyD/9NbYNxz93oW1ujMY3z/er6zhohQqOE5Wl8H4lEz5X/l/8iACM/n5n9RNEF
</span><span class='line'>eAeXbQQFk5+szaE4njK5gGVVUN+WGQ1zH1Hd0NY/6/d/N1vhQiYYg4VeeGvcFBAS
</span><span class='line'>+CuNs4YOa7nM4YUrSKXGQ8pARakICmw03LYhbhCgcIGuRInoLoWnGCqi+OOjBcli
</span><span class='line'>MAEG/7Rb2aNWyjKw/Oyj4X7y3O0MP5nv0a9MHPum5HEbiW6O7ElM6UWHP3pO7rpW
</span><span class='line'>i301yoo8nej1IClmpF+ufH/+vveyG6UNpnzTGj3h+G8t6P6bPeq4vMKIxrskcxGt
</span><span class='line'>HhJfk1EQdHUfZMDYTSHjanCbyMYSo5fbjVVCnJrqO4nHUp9ngbMZMBgi2uROFG8H
</span><span class='line'>3/dKt7cQdd0VFvmUntS2A93M0G7mwwYV2O37jOkVTi1F5Br9anLcnb3FE5CXfqxr
</span><span class='line'>8Fd77Pjhv/sGOIAkxqdldc+grL5OJp76DChWS41cMaZ46BUfN3JgDh8rSqA/A5v+
</span><span class='line'>RkIKpSWYPx6K4EOfGfnr6WnL1oJdcLjIgSab093+7qDYWv2/3B2BsoOTOX5MuZZi
</span><span class='line'>ELcniDJFYSW8aW6TbiKP1x8BkXPynxh9fErz27ciLPx2xtzQEEbiMXjAhvyuRH2o
</span><span class='line'>AJJ2ogzGtOlPwZBvLRDIHDznvxaMx8agp5uyX1+j0SFgpuguHbkCDQRR8OmFARAA
</span><span class='line'>18sCfZrkTLJs2wYgDkVU49pnlKcpZXl4yyoKKZ/AuHBkd1tFQGwCDMFefpxeECKC
</span><span class='line'>6aonQoGrVNIOvR4n2bBdePEvkmQ1Y5xVvfOoPWTdgg6rUqpdpU/vV5b5BNrU63n+
</span><span class='line'>CRdODLdMg67Av7diZlp15PcjiKkkyQ2VTfTgDgWiSyYnKyvZoNnI4mMopEtl3tjh
</span><span class='line'>Vze4TuGI/7UJdh06Gh8AW2WB0wJjr6d0zFsKjQWE5pJELxVBy+E3IO2KpIjLZp2P
</span><span class='line'>N7AWZOpw4CbjFV9pQMaGe6bDPPtnk9D95WQt1AzWkuOA+kMuwlyc5zTutxatDXqt
</span><span class='line'>yfILGESi+l4VkGVJq3wnVDPkjCXsIPk7OJ83GCh28PfPz+o7DM2gNQ0bsP/A2d1w
</span><span class='line'>9Lwhsb1tTjWtVGxP38a/lbTRfbHx+Zy7ZX4INS7R2rbQZmW4Lv59Y6FSFRE3zlII
</span><span class='line'>lOEGW2Wm19S7ORl3ISLRENqYI9b/J/wA0AT1I1vOzTjsHXzZPAs2poHkb7XU8KEX
</span><span class='line'>Rzn0PKpRj4lvxZWpMMNpU17JIwrymb3z64WZBjU1R7hErneSDuVsQj9aT590MVNV
</span><span class='line'>Jupggd/Brs+xeivV6T7wRaMYQWI5TAUenjmy5Q4LxhiLQySpxGvuvx/bxaS1zg3E
</span><span class='line'>nKyvtJzKcWOLzT0V7gLFRKoQ9jIwkl+hpJNVnpTEncsAEQEAAYkCHwQYAQIACQUC
</span><span class='line'>UfDphQIbDAAKCRBmmK8D5X4FB5eiD/4w60Ag7zkZQbnfPyKuxZrejYl2YiLuHlTT
</span><span class='line'>1UdsP6BsyQ4iysOEloW0Vq06tjKj5ahIvRUo5UF2h4ehOnUNbXTFgPegiCEaG0m9
</span><span class='line'>hEvIE9ZWsJqkgUfC5Inq+066AQMJa0PeA8kaSxc5FriMiq7UWuT4ungN8KlqKhaS
</span><span class='line'>Vw5LM5kHEfn0WzHbnvPcq39eAUjkEbVjbN1V5LfDOrV3HM8VKe4OWvSpD1h5tawW
</span><span class='line'>mfUc3jND2RfkiH/r8dY0j5SjggdXAqK14DJL339+Y/r0SpclP7owwBo4xpNabqkF
</span><span class='line'>8D+nwA4hIhgw0XV2BE2MbCe0QIij2S+08/YAoW8X0FKxsQY8UbHHKsIZdFh2jr3Z
</span><span class='line'>SQekkpZqHKUC9CzmBEb5gg434A4NTUdeg9EURg1tBulED66q8NxPQgUU5Qu0ggSZ
</span><span class='line'>hqhth5Cr5WQKxrGJ2x3+0MEmJbL2TKutBSk0qU9gau5sKesCRK8/l6Uxax8NDPZd
</span><span class='line'>O/sirv7X3uL0FN6jnxSMrA/Qj9Vn5QkV+BFdMdOQ0xDdWrZZRoWgWoiNFRVraILM
</span><span class='line'>FXSLslU/Zns4Qu1oEhpvzzT5wW5xkbPhaY+XuQ4Qfl+y/mcHCdQFPfwh+Y81n/Di
</span><span class='line'>uMvB7IUohi8q5z0XUqoyMkP1MccMq4qzoMcSJzHAx3Nju/aBNzS03CTFXDVYIO0g
</span><span class='line'>TN4ixRhleA==
</span><span class='line'>=dEg9
</span><span class='line'>-----END PGP PUBLIC KEY BLOCK-----
</span></code></pre></td></tr></table></div></figure>


<p>There, you have my public key. Save that key into a file called <code>public.key</code> and import that public key using the following command:</p>

<figure class='code'><figcaption><span>Importing a Public Key</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gpg --import public.key
</span></code></pre></td></tr></table></div></figure>


<p>Now it&rsquo;s time to send myself a secret email! To encrypt a message, first, save the message inside a file called <code>plain.txt</code>. Encrypt the file using the following command:</p>

<figure class='code'><figcaption><span>Encrypt a Message</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gpg -a -e -u sender@example.com -r recipient@example.com plain.txt
</span></code></pre></td></tr></table></div></figure>


<p>Replace <code>sender@example.com</code> with your email message and <code>recipient@example.com</code> with your recipient. Make sure to import your recipient&rsquo;s public key first!</p>

<p>The encrypted message would be stored inside <code>plain.txt.asc</code> file:</p>

<figure class='code'><figcaption><span>Encrypted Message</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>-----BEGIN PGP MESSAGE-----
</span><span class='line'>Version: GnuPG v1.4.13 (Darwin)
</span><span class='line'>
</span><span class='line'>hQIMA1wNV+AyV/2aAQ/8Dzd4h2MnY/ZNH2HO4aUUTGbgZfLWrWg1VJOKeldXw5GY
</span><span class='line'>5FkAuywDfCMha9/GH3UHh9vLYjmCHsjf4BeMgA5Z5Z3Hzwp/+kI0Nv+N07L5+UVG
</span><span class='line'>qIdXKjKuc/lBgB5NOrz8Q+7SSBbvQgKgywravwDxtzt/lhCI0J5SjUo9X8ehuH4q
</span><span class='line'>qDB+yZtrGYKdw1Ww4JIgRhV+Lsbjt2jhB2s62RirotyX6sKKVn0EfATcdNKBOuWW
</span><span class='line'>F6pLP7h0AqW0PCq3HGG8hnGeIu7Kef5xCIuJQCb7rgs0TP09NAP5fugMK5I74S2P
</span><span class='line'>DYrQh66mGDrelud3jFq1vKguqOOSrEw5SEnRSG3TeUbjHPxMenvVYkxwhL7p0sK0
</span><span class='line'>1il3s7PMrDuqFEu7SrTRUDUTgbJtrV0hgJKWi0x/6SFKOzodvW8ka5MzIpqKj3KC
</span><span class='line'>jf48s4xfd67uofol79cUuVr4zwWbe6RpDEmRt1JS3hxXTWa0dQN2WNCic0OFRXHt
</span><span class='line'>UQGKJoV2I1U2nEc2DjZNca4f9zuPvjyxCT8gp11E6HJ31WRbln5qixF7W3RA148x
</span><span class='line'>3SC7ThZp687bMGxUTUQimpy4FkrWtvQzYfoILAlJbmFiOUB1ww6q8fWMf3mV4e1n
</span><span class='line'>h1K2bpb4Syu2eeflgUxNdeLfjBmNJgMIGgsHMRspTAVqHo+KJzb1JanvuyVPCcPS
</span><span class='line'>XAGb2WhILc/NRNKodV8LZsqBK6nxCCQM+3mooLUl5KoccG5VVealdf5epN7sbnjg
</span><span class='line'>QlH+2rQjLwGGZH76bDBNhblC2M8tAUxU3BNUd/ax9EspN16IpHgWXNGNvUyh
</span><span class='line'>=rJyP
</span><span class='line'>-----END PGP MESSAGE-----
</span></code></pre></td></tr></table></div></figure>


<p>Now send that file via email to your recipient. Here is how to send the encrypted message using <code>sendmail</code>:</p>

<figure class='code'><figcaption><span>Send The Encrypted Message Using Sendmail</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>cat plain.txt.asc | sendmail arif@sainsmograf.com
</span></code></pre></td></tr></table></div></figure>


<p><img src="https://lh6.googleusercontent.com/-OX554vlxHAA/UfD3nvJBfSI/AAAAAAAAACw/nRf9kju8m8c/d/Screen+Shot+2013-07-25+at+5.01.40+PM.png" title="An Encrypted Email!" ></p>

<p>To decrypt the message, save the message content into a file called <code>cipher.txt</code> and run:</p>

<figure class='code'><figcaption><span>Decrypting a PGP Message</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gpg -d cipher.txt
</span></code></pre></td></tr></table></div></figure>


<p>It would print out the decrypted message:</p>

<figure class='code'><figcaption><span>Decrypting a PGP Message</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gpg: encrypted with 4096-bit RSA key, ID 3257FD9A, created 2013-07-25
</span><span class='line'>      <span class="s2">&quot;Arif Widi Nugroho &lt;arif@sainsmograf.com&gt;&quot;</span>
</span><span class='line'>This is a secret email!
</span></code></pre></td></tr></table></div></figure>


<p>You can encrypt binary data too, or use it to encrypt your off-site backup data. Check the man page (<code>man gpg</code>) or consult the following resource:</p>

<ul>
<li><a href="http://irtfweb.ifa.hawaii.edu/~lockhart/gpg/">GPG Cheat Sheet</a></li>
<li><a href="http://www.robertsosinski.com/2008/02/18/working-with-pgp-and-mac-os-x/">Working with PGP and Mac OS X</a></li>
</ul>


<p>That&rsquo;s just an overview of how PGP works. If you use an email client or install an email client plugin that support PGP, after creating your public/private keys pair, the process is mostly automatic. No need to go back and forth to the command line interface!</p>

<p><img src="https://lh4.googleusercontent.com/-50Khh48XTNY/UfU1QpkjNWI/AAAAAAAAAD4/Ej3sEP0yAsI/w652-h418-no/OSX+Mail+App+%252B+GPGTools.png" title="Sending An Encrypted Email With OSX Mail App + GPGTools" ></p>

<h3>S/MIME (Secure/Multipurpose Internet Mail Extensions)</h3>

<p>Almost the same with PGP, except you don&rsquo;t generate your public/private keys pair yourself. Instead, you obtain them in the form of digital certificate from a certificate authority.</p>

<p>When you send an email signed with S/MIME, your recipient will automatically get your public key. Also, if you obtain your certificate from trusted authority, such as VeriSign, your recipient&rsquo;s email client will automatically validate your message with no manual process involve. Also, unlike PGP, most email clients support S/MIME.</p>

<p>Simply obtain a certificate from a trusted certificate authority, install it, and ready to go! The drawback is you need to pay to get a certificate. <a href="http://www.symantec.com/verisign/digital-id?tid=gnps">You can get a certificate with one year validity from VeriSign here (about $20)</a>.</p>

<ul>
<li><a href="http://arstechnica.com/apple/2011/10/secure-your-e-mail-under-mac-os-x-and-ios-5-with-smime/">S/MIME Guide</a></li>
<li><a href="http://www.comodo.com/home/email-security/free-email-certificate.php">Free S/MIME Certificate &ndash; not trusted by many email clients</a></li>
</ul>


<p>Next:</p>

<h2>Verifying Website Security</h2>

<p>Is the website you visit frequently actually secure? Are you sure the website you visit is actually the real website, not some hacker rig impersonating the real website?</p>

<ul>
<li><a href="https://www.eff.org/pages/tor-and-https">EFF has a nice diagram about connection privacy</a>. Lets discuss it!</li>
<li>Anything without HTTPS is insecure. Don&rsquo;t submit important information over plain http!</li>
</ul>


<h2>How SSL (HTTPS) Works</h2>

<ul>
<li>Initial handshake uses asymmetric encryption to exchange symmetric keys. Therefore HTTPS requires two roundtrip to server. SPDY protocol solve this (but chrome-only).</li>
<li>Validation: The connection might be encrypted, but how can you be sure that the guys on the other side of the cable are not an imposter? Someone I trusted should confirm that I&rsquo;m indeed not talking to a fake imposter.</li>
</ul>


<h2>Deep Net</h2>

<ul>
<li>We need to go <a href="https://www.torproject.org/">deeper</a>.</li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Arif Widi Nugroho</span></span>

      








  


<time datetime="2013-07-15T20:37:00+07:00" pubdate data-updated="true">Jul 15<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/security/'>Security</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://arifwn.github.io/blog/2013/07/15/encryption-primer/" data-via="arifwn" data-counturl="http://arifwn.github.io/blog/2013/07/15/encryption-primer/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/07/15/hello-world/" title="Previous Post: Hello World">&laquo; Hello World</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/15/encryption-primer/">Cryptography Primer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/15/hello-world/">Hello World</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Arif Widi Nugroho -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
